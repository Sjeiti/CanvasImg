if(!this.PerlinSimplex){var PerlinSimplex=function(){var d=Math;var e;var m=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];var l=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]];var h=1;var g=0.5;var c;var b;var n;var i=function i(){var o,p;c=[];b=[];n=0;for(var q=0;q<h;q++){o=Math.pow(2,q);p=Math.pow(g,q);n+=p;c.push(o);b.push(p)}n=1/n};var a=function a(p,o,q){return p[0]*o+p[1]*q};var k=function k(){var o;var q=[];for(o=0;o<256;o++){q[o]=Math.floor(d.random()*256)}e=[];for(o=0;o<512;o++){e[o]=q[o&255]}};var j=function j(H,E){H=H||0;E=E||0;var W,B,p,X,U,z,F,C,A,R,L,S,Q,q,K,aa,w,Z,v,P,o,V,u,T,r,J,Y,O,N,M,I,G,D;W=0;for(X=0;X<h;X++){B=c[X];p=b[X];U=H*B;z=E*B;R=0.5*(Math.sqrt(3)-1);L=(U+z)*R;S=Math.floor(U+L);Q=Math.floor(z+L);q=(3-Math.sqrt(3))/6;K=(S+Q)*q;aa=S-K;w=Q-K;Z=U-aa;v=z-w;if(Z>v){P=1;o=0}else{P=0;o=1}V=Z-P+q;u=v-o+q;T=Z-1+2*q;r=v-1+2*q;J=S&255;Y=Q&255;O=e[J+e[Y]]%12;N=e[J+P+e[Y+o]]%12;M=e[J+1+e[Y+1]]%12;I=0.5-Z*Z-v*v;if(I<0){F=0}else{I*=I;F=I*I*a(m[O],Z,v)}G=0.5-V*V-u*u;if(G<0){C=0}else{G*=G;C=G*G*a(m[N],V,u)}D=0.5-T*T-r*r;if(D<0){A=0}else{D*=D;A=D*D*a(m[M],T,r)}W+=(70*(F+C+A))*p}return(W*n+1)*0.5};var f=function f(af,ae,ad){var q,K,aj,ap,ab,O,I,R,Q,P,N,U,ai,an,al,ak,C,ah,ag,J,p,H,o,ac,u,ao,M,r,am,L,G,au,aa,F,at,Z,E,ar,Y,W,B,aq,D,A,w,v,X,V,T,S;q=0;af=af||0;ae=ae||0;ad=ad||0;for(ap=0;ap<h;ap++){K=c[ap];aj=b[ap];ab=af*K;O=ae*K;I=ad*K;U=1/3;ai=(ab+O+I)*U;an=Math.floor(ab+ai);al=Math.floor(O+ai);ak=Math.floor(I+ai);C=1/6;ah=(an+al+ak)*C;ag=an-ah;J=al-ah;p=ak-ah;H=ab-ag;o=O-J;ac=I-p;if(H>=o){if(o>=ac){u=1;ao=0;M=0;r=1;am=1;L=0}else{if(H>=ac){u=1;ao=0;M=0;r=1;am=0;L=1}else{u=0;ao=0;M=1;r=1;am=0;L=1}}}else{if(o<ac){u=0;ao=0;M=1;r=0;am=1;L=1}else{if(H<ac){u=0;ao=1;M=0;r=0;am=1;L=1}else{u=0;ao=1;M=0;r=1;am=1;L=0}}}G=H-u+C;au=o-ao+C;aa=ac-M+C;F=H-r+2*C;at=o-am+2*C;Z=ac-L+2*C;E=H-1+3*C;ar=o-1+3*C;Y=ac-1+3*C;W=an&255;B=al&255;aq=ak&255;D=e[W+e[B+e[aq]]]%12;A=e[W+u+e[B+ao+e[aq+M]]]%12;w=e[W+r+e[B+am+e[aq+L]]]%12;v=e[W+1+e[B+1+e[aq+1]]]%12;X=0.6-H*H-o*o-ac*ac;if(X<0){R=0}else{X*=X;R=X*X*a(m[D],H,o,ac)}V=0.6-G*G-au*au-aa*aa;if(V<0){Q=0}else{V*=V;Q=V*V*a(m[A],G,au,aa)}T=0.6-F*F-at*at-Z*Z;if(T<0){P=0}else{T*=T;P=T*T*a(m[w],F,at,Z)}S=0.6-E*E-ar*ar-Y*Y;if(S<0){N=0}else{S*=S;N=S*S*a(m[v],E,ar,Y)}q+=(32*(R+Q+P+N))*aj}return(q*n+1)*0.5};k();i();return{noise:function(o,q,p){if(arguments.length==3){return f(o,q,p)}else{return j(o,q)}},noiseDetail:function(o,p){h=o||h;g=p||g;i()},setRng:function(o){d=o;k()},toString:function(){return"[object PerlinSimplex "+h+" "+g+"]"}}}()};